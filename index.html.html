<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Verb Grinder Web App</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-b from-slate-50 to-slate-100 min-h-screen text-slate-800">
  <div class="max-w-5xl mx-auto p-4 sm:p-6">
    <header class="text-center mb-6">
      <h1 class="text-3xl sm:text-4xl font-bold">Verb Grinder Web</h1>
      <p class="text-slate-600 mt-2">Master verbs in Business English — cheat sheets, exercises, and stories</p>
    </header>

    <!-- Input Section -->
    <section class="bg-white rounded-xl shadow-sm p-5 mb-5 border">
      <div class="flex flex-col sm:flex-row gap-3 sm:items-center">
        <input id="verbInput" type="text" placeholder="Enter a verb (e.g., collaborated, written, swimming)" class="w-full sm:flex-1 rounded-xl border px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <button id="genBtn" class="rounded-xl bg-blue-600 text-white px-5 py-2 hover:bg-blue-700">Generate</button>
      </div>
      <div id="nav" class="hidden mt-4 flex-wrap gap-2">
        <button data-mode="cheat" class="modeBtn rounded-xl border px-4 py-2 bg-slate-900 text-white">Cheat Sheet</button>
        <button data-mode="ex" class="modeBtn rounded-xl border px-4 py-2 hover:bg-slate-100">Exercises</button>
        <button data-mode="story" class="modeBtn rounded-xl border px-4 py-2 hover:bg-slate-100">Story</button>
      </div>
    </section>

    <!-- Content -->
    <main id="content"></main>

    <footer class="mt-10 text-center text-xs text-slate-500">
      Built with ❤️ using plain HTML, CSS & JS.
    </footer>
  </div>

  <script>
    // Expanded irregular verbs
    const IRREGULARS = {
      be: { past: 'was/were', ppart: 'been' },
      have: { past: 'had', ppart: 'had' },
      do: { past: 'did', ppart: 'done' },
      go: { past: 'went', ppart: 'gone' },
      come: { past: 'came', ppart: 'come' },
      make: { past: 'made', ppart: 'made' },
      take: { past: 'took', ppart: 'taken' },
      get: { past: 'got', ppart: 'gotten' },
      give: { past: 'gave', ppart: 'given' },
      say: { past: 'said', ppart: 'said' },
      see: { past: 'saw', ppart: 'seen' },
      think: { past: 'thought', ppart: 'thought' },
      write: { past: 'wrote', ppart: 'written' },
      read: { past: 'read', ppart: 'read' },
      run: { past: 'ran', ppart: 'run' },
      buy: { past: 'bought', ppart: 'bought' },
      bring: { past: 'brought', ppart: 'brought' },
      build: { past: 'built', ppart: 'built' },
      choose: { past: 'chose', ppart: 'chosen' },
      eat: { past: 'ate', ppart: 'eaten' },
      know: { past: 'knew', ppart: 'known' },
      swim: { past: 'swam', ppart: 'swum' }
    };

    // Helpers
    function pastRegular(v){
      if(v.endsWith('e')) return v + 'd';
      if(/[^aeiou]y$/.test(v)) return v.slice(0,-1) + 'ied';
      return v + 'ed';
    }
    function ingForm(v){ if(v.endsWith('e')) return v.slice(0,-1)+'ing'; return v+'ing'; }
    function thirdPerson(v){ if(/(s|sh|ch|x|z|o)$/.test(v)) return v+'es'; if(/[^aeiou]y$/.test(v)) return v.slice(0,-1)+'ies'; return v+'s'; }

    // Verb detector
    function detectBaseForm(input){
      const word = input.toLowerCase().trim();
      if(!word) return { base:'', form:'unknown', original:input };
      for(const [base, forms] of Object.entries(IRREGULARS)){
        if(word===base) return { base, form:'base', original:input };
        if(forms.past.split('/').includes(word)) return { base, form:'past', original:input };
        if(word===forms.ppart) return { base, form:'past participle', original:input };
        if(word===ingForm(base)) return { base, form:'-ing form', original:input };
        if(word===thirdPerson(base)) return { base, form:'3rd person singular', original:input };
      }
      if(word.endsWith('ed')) return { base: word.replace(/ed$/,''), form:'past/past participle', original:input };
      if(word.endsWith('ing')) return { base: word.replace(/ing$/,''), form:'-ing form', original:input };
      if(word.endsWith('s')) return { base: word.replace(/s$/,''), form:'3rd person singular', original:input };
      return { base:word, form:'base', original:input };
    }

    // Build full data
    function buildVerbData(input){
      const detected = detectBaseForm(input);
      const base = detected.base;
      if(!base) return null;
      const irr = IRREGULARS[base];
      const past = irr ? irr.past : pastRegular(base);
      const ppart = irr ? irr.ppart : pastRegular(base);
      const ing = ingForm(base);
      const props = `${irr ? 'Irregular' : 'Regular'}; Main verb; Dynamic; Transitive/Intransitive`;
      return {
        ...detected,
        past, ppart, ing,
        pronunciation: { ipa:`/${base}/`, simple: base },
        definitions: { general:`To ${base} (placeholder).`, business:`To ${base} in business context (placeholder).` },
        examples: [ `${base} a project with your team.`, `The system will ${base} automatically.` ],
        finite: `She ${base}s the report.`,
        nonfinite: `To ${base} effectively is important.`,
        props,
        collocations: [ `${base} with stakeholders`, `${base} across teams`, `${base} results` ],
        synonyms: ['execute','perform','do'],
        antonyms: ['avoid','ignore','neglect']
      };
    }

    // Render cheat sheet with full Verb Cruncher layout
    function renderCheatSheet(d){
      return `<section class="bg-white rounded-xl shadow p-5 border space-y-4">
        <p class="text-sm text-slate-600">You entered: <b>${d.original}</b> → Base: <b>${d.base}</b> (${d.form})</p>

        <div>
          <h2 class="text-xl font-semibold mb-2">Forms</h2>
          <ul class="list-disc ml-6 text-sm">
            <li>Base: ${d.base}</li>
            <li>Past: ${d.past}</li>
            <li>Past participle: ${d.ppart}</li>
            <li>-ing: ${d.ing}</li>
            <li>3rd person: ${thirdPerson(d.base)}</li>
          </ul>
        </div>

        <div>
          <h2 class="text-xl font-semibold mb-2">Pronunciation</h2>
          <p class="text-sm">IPA: ${d.pronunciation.ipa} | Simple: ${d.pronunciation.simple}</p>
        </div>

        <div>
          <h2 class="text-xl font-semibold mb-2">Definitions</h2>
          <p class="text-sm">General: ${d.definitions.general}</p>
          <p class="text-sm">Business: ${d.definitions.business}</p>
        </div>

        <div>
          <h2 class="text-xl font-semibold mb-2">Properties</h2>
          <p class="text-sm">${d.props}</p>
        </div>

        <div>
          <h2 class="text-xl font-semibold mb-2">Examples</h2>
          <ul class="list-disc ml-6 text-sm">
            <li>${d.examples[0]}</li>
            <li>${d.examples[1]}</li>
          </ul>
        </div>

        <div>
          <h2 class="text-xl font-semibold mb-2">Finite vs Non-finite</h2>
          <p class="text-sm">Finite: ${d.finite}</p>
          <p class="text-sm">Non-finite: ${d.nonfinite}</p>
        </div>

        <div>
          <h2 class="text-xl font-semibold mb-2">Conjugation Grid</h2>
          <table class="table-auto text-sm border w-full">
            <tr><td>I</td><td>${d.base}</td></tr>
            <tr><td>You</td><td>${d.base}</td></tr>
            <tr><td>He/She/It</td><td>${thirdPerson(d.base)}</td></tr>
            <tr><td>We</td><td>${d.base}</td></tr>
            <tr><td>They</td><td>${d.base}</td></tr>
            <tr><td>Past (all)</td><td>${d.past}</td></tr>
          </table>
        </div>

        <div>
          <h2 class="text-xl font-semibold mb-2">12-Tense Matrix</h2>
          <table class="table-auto text-sm border w-full">
            <tr><th></th><th>Simple</th><th>Continuous</th><th>Perfect</th><th>Perfect Continuous</th></tr>
            <tr><td>Past</td><td>${d.past}</td><td>was/were ${d.ing}</td><td>had ${d.ppart}</td><td>had been ${d.ing}</td></tr>
            <tr><td>Present</td><td>${d.base}/${thirdPerson(d.base)}</td><td>am/is/are ${d.ing}</td><td>have/has ${d.ppart}</td><td>have/has been ${d.ing}</td></tr>
            <tr><td>Future</td><td>will ${d.base}</td><td>will be ${d.ing}</td><td>will have ${d.ppart}</td><td>will have been ${d.ing}</td></tr>
          </table>
        </div>

        <div>
          <h2 class="text-xl font-semibold mb-2">Business Collocations</h2>
          <p class="text-sm">${d.collocations.join(', ')}</p>
        </div>

        <div>
          <h2 class="text-xl font-semibold mb-2">Synonyms & Antonyms</h2>
          <p class="text-sm">Synonyms: ${d.synonyms.join(', ')}</p>
          <p class="text-sm">Antonyms: ${d.antonyms.join(', ')}</p>
        </div>
      </section>`;
    }

    // Exercises (simple placeholder)
    function renderExercises(d){
      return `<section class="bg-white rounded-xl shadow p-5 border">
        <h2 class="text-xl font-semibold mb-3">Exercises — ${d.base}</h2>
        <p class="text-sm">1) Choose the correct past form:</p>
        <button class="ans border px-2 py-1 m-1">${d.past}</button>
        <button class="ans border px-2 py-1 m-1">${d.base+'ed'}</button>
        <p id="exFeedback" class="mt-2 text-sm"></p>
      </section>`;
    }

    // Story (placeholder)
    function renderStory(d){
      return `<section class="bg-white rounded-xl shadow p-5 border">
        <h2 class="text-xl font-semibold mb-3">Story — ${d.base}</h2>
        <p class="text-sm">On Monday, the team decided to ${d.base}. By Friday, they had ${d.ppart} results while ${d.ing} with global partners.</p>
      </section>`;
    }

    // Mounting
    const contentEl = document.getElementById('content');
    const navEl = document.getElementById('nav');
    const verbInput = document.getElementById('verbInput');
    let currentData = null;

    function setModeButtons(active){
      navEl.querySelectorAll('button').forEach(btn => {
        btn.classList.toggle('bg-slate-900', btn.dataset.mode===active);
        btn.classList.toggle('text-white', btn.dataset.mode===active);
      });
    }

    function generate(){
      const d = buildVerbData(verbInput.value || 'be');
      if(!d) return;
      currentData = d;
      navEl.classList.remove('hidden');
      setModeButtons('cheat');
      contentEl.innerHTML = renderCheatSheet(d);
    }

    document.getElementById('genBtn').addEventListener('click', generate);
    verbInput.addEventListener('keydown', e => { if(e.key==='Enter') generate(); });
    navEl.addEventListener('click', e => {
      const btn = e.target.closest('button.modeBtn');
      if(!btn || !currentData) return;
      setModeButtons(btn.dataset.mode);
      if(btn.dataset.mode==='cheat') contentEl.innerHTML = renderCheatSheet(currentData);
      if(btn.dataset.mode==='ex') contentEl.innerHTML = renderExercises(currentData);
      if(btn.dataset.mode==='story') contentEl.innerHTML = renderStory(currentData);
    });

    // Default verb: be
    verbInput.value = 'be';
    generate();
  </script>
</body>
</html>